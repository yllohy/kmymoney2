#MIN_CONFIG(3.0)

AM_INIT_AUTOMAKE(kmymoney2,0.7.0)

dnl
dnl check for a recent autoconf version
dnl
AC_PREREQ(2.53)

dnl
dnl check for atoll and strtoll
dnl
AC_FUNC_CHECK(atoll, [AC_DEFINE_UNQUOTED(HAVE_ATOLL, 1, [define if you have atoll])])
AC_FUNC_CHECK(strtoll, [AC_DEFINE_UNQUOTED(HAVE_STRTOLL, 1, [define if you have strtoll])])
AC_CHECK_LIB(m, round, [AC_DEFINE_UNQUOTED(HAVE_ROUND, 1, [define if you have round])]
)

dnl
dnl add checks for cppunit
dnl
AM_PATH_CPPUNIT(1.8.0,
	AM_CONDITIONAL(CPPUNIT, test "x$no_cppunit" = x)
	AC_DEFINE_UNQUOTED(HAVE_LIBCPPUNIT, 1, [Define if you have libcppunit])
	AC_SUBST(CPPUNIT_LIBS),
	AM_CONDITIONAL(CPPUNIT, test "x$no_cppunit" = x)
	AC_SUBST(CPPUNIT_LIBS)
	)

dnl
dnl check for libxml2
dnl
AM_PATH_XML2(2.0.0,
	AM_CONDITIONAL(LIBXML2, test "x$no_xml" = x)
	AC_DEFINE_UNQUOTED(HAVE_LIBXML2, 1, [Define if you have libxml2])
	AC_SUBST(XML2_LIBS),
	AM_CONDITIONAL(LIBXML2, test "x$no_xml" = x)
	AC_SUBST(XML2_LIBS)
	)

dnl
dnl check for kbanking
dnl
AC_KBANKING()
if test "$have_kbanking" = "yes"; then
  all_includes="$all_includes $kbanking_includes"
fi

dnl
dnl check for libofx
dnl 
AC_LIBOFX()

dnl CXXFLAGS="$NOOPT_CXXFLAGS" dnl __kdevelop[noopt]__
CXXFLAGS="$CXXFLAGS $USE_EXCEPTIONS" dnl __kdevelop[exc]__
dnl KDE_NEED_FLEX dnl __kdevelop__
dnl AC_PROG_YACC dnl __kdevelop__

