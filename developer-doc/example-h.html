<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
<head>
  <link type="text/css" rel="stylesheet" href="kmymoney2.css">
</head>
<body>

<table width="100%">
<tr>
  <td width="33%" align="left"><a href="coding-h.html">Previous</a><td>
  <td width="33%" align="center"><a href="code-standards.html">Code Standards</a></td>
  <td width="33%" align="right">Next</td>
</tr>
</table>
<hr>
<h2 class="highlighted">Example header file for use by KMyMoney2</h2>
<pre>
/***************************************************************************
                          mymoneyfile.h
                             -------------------
    copyright            : (C) 2000 by Michael Edwardes
    email                : mte@users.sourceforge.net
 ***************************************************************************/

/***************************************************************************
 *                                                                         *
 *   This program is free software; you can redistribute it and/or modify  *
 *   it under the terms of the GNU General Public License as published by  *
 *   the Free Software Foundation; either version 2 of the License, or     *
 *   (at your option) any later version.                                   *
 *                                                                         *
 ***************************************************************************/

#ifndef MYMONEYFILE_H
#define MYMONEYFILE_H

//-----------------------------------------------------------------------------
// QT Headers
#include &lt;qstring.h&gt;
#include &lt;qlist.h&gt;
#include &lt;qdatetime.h&gt;
#include &lt;stdio.h&gt;
#include &lt;qstringlist.h&gt;

//-----------------------------------------------------------------------------
// KDE Headers

//-----------------------------------------------------------------------------
// Project Headers
#include "mymoneybank.h"
#include "mymoneypayee.h"
#include "mymoneycategory.h"
#include "mymoneyaccount.h"

/**
  * This class is used by the GUI to interrogate the transaction engine.  It is not
  * library independant at the moment and still relies upon QT for many of it's
  * attributes and method calls.  Eventually this code will be separated from QT
  * and could be usable from other GUI toolkits such as gtk as used by the GNOME
  * desktop environment.
  *
  * TODO: Remove all QT dependance e.g QString, QList etc.
  *
  * @see MyMoneyBank
  *
  * @author Michael Edwardes 2000-2001
  * $Id: example-h.html,v 1.1 2001/07/16 20:25:08 mte Exp $
  *
  * @short A representation of the file format used by KMyMoney2.
**/
class MyMoneyFile {
private:
  // File 'fields'
  QString m_qstringUserName;
  QString m_qstringUserStreet;
  QString m_qstringUserTown;
  QString m_qstringUserCounty;
  QString m_qstringUserPostcode;
  QString m_qstringUserTelephone;
  QString m_qstringUserEmail;
  QDate m_qdateCreatedDate;
  QDate m_qdateLastAccess;
  QDate m_qdateLastModify;
  bool m_bDirty;
  bool m_bPasswordProtected;  // Not used yet
  bool m_bEncrypted;  // Not used yet
  QString m_qstringPassword;  // Not used yet

  // 'Helper' variables and methods
  bool m_bInitialised;
  bool m_bContainsBanks, m_bContainsAccounts, m_bContainsTransactions;

  // A list containing the banks
  QList&lt;MyMoneyBank&gt; m_qlistBanks;

  // A list containing the list of banks that ATM knows about
  // Not used yet.
  QStringList m_qstringlistBankNames;

  // A list containing all the payees that have been used
  QList&lt;MyMoneyPayee&gt; m_qlistPayeeList;

  // A list containing all the categories that have been used.
  // When a new file is created the list is read in from
  // &lt;kde2dir&gt;/share/apps/kmymoney2/default_categories.dat
  QList&lt;MyMoneyCategory&gt; m_qlistCategoryList;

  bool findBankPosition(const MyMoneyBank& bank, unsigned int&);

private slots:

protected:

protected slots:

public:
  /**
    * Standard constructor.  Just sets up some default values.
  **/
  MyMoneyFile();

  /**
    * This is the constructor usually used.  The passed parameters are used to
    * initialise the attributes of this class.
    *
    * @param username The users name.
    * @param userStreet Part of the users address.
    * @param userTown Part of the users address.
    * @param userCounty Part of the users address.
    * @param userPostcode Part of the users address.
    * @param userTelephone The users telephone number.
    * @param userEmail The users email address.
    * @param createDate TODO: remove this and use QDate::currentDate() in the constructor.
  **/
  MyMoneyFile(const QString& username, const QString& userStreet,
    const QString& userTown, const QString& userCounty, const QString& userPostcode, const QString& userTelephone,
    const QString& userEmail, const QDate& createDate);

  /**
    * Standard destructor.
  **/
  ~MyMoneyFile();

  /**
    * Adds a bank to the underlying data structures.  The parameters passed are used
    * to create the bank which is then added.
    *
    * @param name The banks name.
    * @param sortCode The banks sort code.
    * @param city Part of the banks address.
    * @param street Part of the banks address.
    * @param postcode Part of the banks address.
    * @param telephone The banks telephone number.
    * @param manager The bank managers name.
    *
    * @see MyMoneyBank
  **/
  bool addBank(const QString& name, const QString& sortCode, const QString& city, const QString& street,
    const QString& postcode, const QString& telephone, const QString& manager);

  /**
    * Finds the bank in the list that matches the supplied argument.
    *
    * @param bank The bank to look for.
    *
    * @return A pointer to the bank if found, O otherwise.
    *
    * @see MyMoneyBank
  **/
  MyMoneyBank* bank(const MyMoneyBank& bank);

  /**
    * Returns the first bank stored.  Typically used in for
    * statements as follows:
    * MyMoneyBank *bank;
    * for (bank=bankFirst(); bank; bank=bankNext()) {
    *   // Do something with the bank
    * }
    *
    * @return The first bank in the list or 0 if no banks are present.
    *
    * @see MyMoneyBank
  **/
  MyMoneyBank* bankFirst(void);

  /**
    * Returns the 'next' bank stored.  Typically used in for
    * statements as follows:
    * MyMoneyBank *bank;
    * for (bank=bankFirst(); bank; bank=bankNext()) {
    *   // Do something with the bank
    * }
    *
    * @return The next bank in the list or 0 if no banks are present or there is no next.
    *
    * @see MyMoneyBank
  **/
  MyMoneyBank* bankNext(void);

  /**
    * Returns the first bank stored.  Typically used in while
    * statements as follows:
    * MyMoneyBank *bank = bankFirst();
    * while (bank != bankLast()) {
    *   // Do something with the bank
    * }
    *
    * @return The first bank in the list or 0 if no banks are present.
    *
    * @see MyMoneyBank
  **/
  MyMoneyBank* bankLast(void);

  /**
    * Returns the number of banks held in the file.
    *
    * @return The bank count.
    *
    * @see MyMoneyBank
  **/
  unsigned int bankCount(void);

  /**
    * Removes a bank from the list that matches the parameter.
    *
    * @param bank A copy of the bank to remove.
    *
    * @return Whether the remove was succesfull.
    *
    * @see MyMoneyBank
  **/
  bool removeBank(const MyMoneyBank& bank);

  ... file abbreviated.
};

#endif
</pre>

<hr>
<table width="100%">
<tr>
  <td width="33%" align="left"><a href="coding-h.html">Previous</a><td>
  <td width="33%" align="center"><a href="code-standards.html">Code Standards</a></td>
  <td width="33%" align="right">Next</td>
</tr>
</table>

</body>
</html>